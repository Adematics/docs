(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{761:function(t,e,a){"use strict";a.r(e);var s=a(19),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"storage-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#storage-configuration"}},[t._v("#")]),t._v(" Storage configuration")]),t._v(" "),a("p",[t._v("Kestra needs "),a("a",{attrs:{href:"../../../architecture#storage"}},[t._v("internal storage")]),t._v(" in order to store file proceeded (uploaded files & between tasks).")]),t._v(" "),a("p",[t._v("The default storage is the Local storage ("),a("strong",[t._v("not production ready")]),t._v(").")]),t._v(" "),a("p",[t._v("Available storage options include:")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#gcs"}},[t._v("Storage GCS")]),t._v(" for "),a("a",{attrs:{href:"https://cloud.google.com/storage",target:"_blank",rel:"noopener noreferrer"}},[t._v("Google Cloud Storage"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"#minio"}},[t._v("Storage Minio")]),t._v(" compatible with "),a("a",{attrs:{href:"https://aws.amazon.com/s3/",target:"_blank",rel:"noopener noreferrer"}},[t._v("AWS S3"),a("OutboundLink")],1),t._v(" and all others "),a("em",[t._v("S3 like")]),t._v(" storage")]),t._v(" "),a("li",[a("a",{attrs:{href:"#azure"}},[t._v("Storage Azure")]),t._v(" for "),a("a",{attrs:{href:"https://azure.microsoft.com/en-us/services/storage/blobs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Azure Blob Storage"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"gcs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gcs"}},[t._v("#")]),t._v(" GCS")]),t._v(" "),a("p",[t._v("First, you need to be sure to have the GCS storage plugin installed. You can install it with the following Kestra command:"),a("br"),t._v(" "),a("code",[t._v("./kestra plugins install io.kestra.storage.gcs:storage-gcs:LATEST")]),t._v(", it will download the plugin jar in Kestra plugins directory.")]),t._v(" "),a("p",[t._v("Then, you need to enable the storage with this configuration:")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kestra")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("storage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gcs\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gcs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bucket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<your-bucket-name>"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("service-account")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<service-account key as json or use default credentials>"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("project-id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<project-id or use default projectId>"')]),t._v("\n")])])]),a("p",[t._v("Kestra will use the default service account 'GCP service account', meaning that it will:")]),t._v(" "),a("ul",[a("li",[t._v("use the service account defined on the cluster for GKE.")]),t._v(" "),a("li",[t._v("use the service account defined on the VM for GCE.")])]),t._v(" "),a("p",[t._v("You can also provide the environment variable "),a("code",[t._v("GOOGLE_APPLICATION_CREDENTIALS")]),t._v(" with a path to a json GCP service account key.")]),t._v(" "),a("p",[t._v("More details can be found "),a("a",{attrs:{href:"https://cloud.google.com/docs/authentication/production",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"minio"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#minio"}},[t._v("#")]),t._v(" Minio")]),t._v(" "),a("p",[t._v("First, you need to be sure to have the Minio storage plugin installed. You can install it with the following Kestra command:"),a("br"),t._v(" "),a("code",[t._v("./kestra plugins install io.kestra.storage.minio:storage-minio:LATEST")]),t._v(", it will download the plugin jar in Kestra plugins directory.")]),t._v(" "),a("p",[t._v("Then, you need to enable the storage with this configuration:")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kestra")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("storage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" minio\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("minio")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("endpoint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<your-endpoint>"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<your-port>"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("accessKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<your-accessKey>"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("secretKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<your-secretKey>"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("region")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<your-region>"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("secure")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<your-secure>"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bucket")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<your-bucket>"')]),t._v("\n")])])]),a("h2",{attrs:{id:"azure"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#azure"}},[t._v("#")]),t._v(" Azure")]),t._v(" "),a("p",[t._v("First, you need to be sure to have the Azure storage plugin installed. You can install it with the following Kestra command:"),a("br"),t._v(" "),a("code",[t._v("./kestra plugins install io.kestra.storage.azure:storage-azure:LATEST")]),t._v(", it will download the plugin jar in Kestra plugins directory.")]),t._v(" "),a("p",[t._v("Then, you need to enable the storage with this configuration (adapt depending on authentication method):")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kestra")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("storage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" azure\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("azure")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("endpoint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://unittestkt.blob.core.windows.net"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" storage\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("connection-string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<connection-string>"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("shared-key-account-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<shared-key-account-name>"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("shared-key-account-access-key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<shared-key-account-access-key>"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("sas-token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<sas-token>"')]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);