(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{788:function(t,e,r){"use strict";r.r(e);var o=r(2),n=Object(o.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"monitoring-alerting"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#monitoring-alerting"}},[t._v("#")]),t._v(" Monitoring & Alerting")]),t._v(" "),r("p",[t._v("Kestra will start a monitoring endpoint on port 8081 by default. (You can change this port with"),r("br"),t._v(" "),r("a",{attrs:{href:"../configuration"}},[t._v("configuration options")]),t._v(" "),r("code",[t._v("endpoints:.all.port")]),t._v(")")]),t._v(" "),r("p",[t._v("This monitoring endpoint will expose some helpful route in order to monitor Kestra:")]),t._v(" "),r("h2",{attrs:{id:"prometheus"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#prometheus"}},[t._v("#")]),t._v(" Prometheus")]),t._v(" "),r("p",[t._v("If you have any "),r("a",{attrs:{href:"https://prometheus.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Prometheus"),r("OutboundLink")],1),t._v(" monitoring systems, Kestra expose this endpoint "),r("code",[t._v("/prometheus")])]),t._v(" "),r("h3",{attrs:{id:"kestra-metrics"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#kestra-metrics"}},[t._v("#")]),t._v(" Kestra metrics")]),t._v(" "),r("p",[t._v("Kestra expose some internal metrics allowing to add some alert. Each one declare many timeseries with tags allowing"),r("br"),t._v("\nto track at least namespace & flow. But also some others tags depending on available tasks.")]),t._v(" "),r("p",[t._v("Also each task type can expose "),r("RouterLink",{attrs:{to:"/docs/concepts/executions.html#metrics"}},[t._v("custom metrics")]),t._v(" that will be exposed on prometheus.")],1),t._v(" "),r("h4",{attrs:{id:"worker"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#worker"}},[t._v("#")]),t._v(" Worker")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("Metrics")]),t._v(" "),r("th",[t._v("Type")]),t._v(" "),r("th",[t._v("Description")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("worker.running.count")]),t._v(" "),r("td",[r("code",[t._v("GAUGE")])]),t._v(" "),r("td",[t._v("Task actually running")])]),t._v(" "),r("tr",[r("td",[t._v("worker.started.count")]),t._v(" "),r("td",[r("code",[t._v("COUNTER")])]),t._v(" "),r("td",[t._v("Count of tasks started")])]),t._v(" "),r("tr",[r("td",[t._v("worker.retryed.count")]),t._v(" "),r("td",[r("code",[t._v("COUNTER")])]),t._v(" "),r("td",[t._v("Count of tasks retried")])]),t._v(" "),r("tr",[r("td",[t._v("worker.ended.count")]),t._v(" "),r("td",[r("code",[t._v("COUNTER")])]),t._v(" "),r("td",[t._v("Count of tasks ended")])]),t._v(" "),r("tr",[r("td",[t._v("worker.ended.duration")]),t._v(" "),r("td",[r("code",[t._v("TIMER")])]),t._v(" "),r("td",[t._v("Duration of tasks ended")])])])]),t._v(" "),r("h4",{attrs:{id:"executor"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#executor"}},[t._v("#")]),t._v(" Executor")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("Metrics")]),t._v(" "),r("th",[t._v("Type")]),t._v(" "),r("th",[t._v("Description")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("executor.taskrun.next.count")]),t._v(" "),r("td",[r("code",[t._v("COUNTER")])]),t._v(" "),r("td",[t._v("Count of tasks found")])]),t._v(" "),r("tr",[r("td",[t._v("executor.taskrun.ended.count")]),t._v(" "),r("td",[r("code",[t._v("COUNTER")])]),t._v(" "),r("td",[t._v("Count of tasks ended")])]),t._v(" "),r("tr",[r("td",[t._v("executor.taskrun.ended.duration")]),t._v(" "),r("td",[r("code",[t._v("TOMER")])]),t._v(" "),r("td",[t._v("Duration of tasks ended")])]),t._v(" "),r("tr",[r("td",[t._v("executor.workertaskresult.count")]),t._v(" "),r("td",[r("code",[t._v("COUNTER")])]),t._v(" "),r("td",[t._v("Count of task result send by worker")])]),t._v(" "),r("tr",[r("td",[t._v("executor.execution.started.count")]),t._v(" "),r("td",[r("code",[t._v("COUNTER")])]),t._v(" "),r("td",[t._v("Count of executions started")])]),t._v(" "),r("tr",[r("td",[t._v("executor.execution.end.count")]),t._v(" "),r("td",[r("code",[t._v("COUNTER")])]),t._v(" "),r("td",[t._v("Count of executions ended")])]),t._v(" "),r("tr",[r("td",[t._v("executor.execution.duration")]),t._v(" "),r("td",[r("code",[t._v("TIMER")])]),t._v(" "),r("td",[t._v("Duration of executions ended")])])])]),t._v(" "),r("h4",{attrs:{id:"indexer"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#indexer"}},[t._v("#")]),t._v(" Indexer")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("Metrics")]),t._v(" "),r("th",[t._v("Type")]),t._v(" "),r("th",[t._v("Description")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("indexer.count")]),t._v(" "),r("td",[r("code",[t._v("COUNTER")])]),t._v(" "),r("td",[t._v("Count of indexation sent to repository")])]),t._v(" "),r("tr",[r("td",[t._v("indexer.duration")]),t._v(" "),r("td",[r("code",[t._v("DURATION")])]),t._v(" "),r("td",[t._v("Duration of indexation sent to repository")])])])]),t._v(" "),r("h4",{attrs:{id:"scheduler"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#scheduler"}},[t._v("#")]),t._v(" Scheduler")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("Metrics")]),t._v(" "),r("th",[t._v("Type")]),t._v(" "),r("th",[t._v("Description")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("scheduler.trigger.count")]),t._v(" "),r("td",[r("code",[t._v("COUNTER")])]),t._v(" "),r("td",[t._v("Count of trigger found")])]),t._v(" "),r("tr",[r("td",[t._v("scheduler.evaluate.running.count")]),t._v(" "),r("td",[r("code",[t._v("COUNTER")])]),t._v(" "),r("td",[t._v("Evaluation of trigger actually running (aka: number of thread used by scheduler)")])]),t._v(" "),r("tr",[r("td",[t._v("scheduler.evaluate.duration")]),t._v(" "),r("td",[r("code",[t._v("TIMER")])]),t._v(" "),r("td",[t._v("Duration of evaluation of trigger")])])])]),t._v(" "),r("h3",{attrs:{id:"others-metrics"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#others-metrics"}},[t._v("#")]),t._v(" Others metrics")]),t._v(" "),r("p",[t._v("It will also expose all internal metrics from :")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://micronaut-projects.github.io/micronaut-micrometer/latest/guide/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Micronaut"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://kafka.apache.org/documentation/#remote_jmx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kafka"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("Thread pool on the application")]),t._v(" "),r("li",[t._v("...")])]),t._v(" "),r("p",[t._v("Some additional information can be found on "),r("a",{attrs:{href:"https://micronaut-projects.github.io/micronaut-micrometer/latest/guide/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Micronaut documentation"),r("OutboundLink")],1)]),t._v(" "),r("h2",{attrs:{id:"grafana-or-kibana"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#grafana-or-kibana"}},[t._v("#")]),t._v(" Grafana or Kibana")]),t._v(" "),r("p",[t._v("Since Elasticsearch is used to store all executions & metrics, you can easily make a dashboard with"),r("br"),t._v(" "),r("a",{attrs:{href:"https://grafana.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Grafana"),r("OutboundLink")],1),t._v(" or "),r("a",{attrs:{href:"https://www.elastic.co/kibana",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kibana"),r("OutboundLink")],1),t._v(" in order to follow your Kestra instance.")]),t._v(" "),r("p",[t._v("In a near future, we will provide a template dashboard as a quick start.")]),t._v(" "),r("h2",{attrs:{id:"kestra-endpoint"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#kestra-endpoint"}},[t._v("#")]),t._v(" Kestra endpoint")]),t._v(" "),r("p",[t._v("Kestra expose some internal endpoint on management port (8081 by default) depending on servers:")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("/worker")]),t._v(": will expose all current running task on this worker")]),t._v(" "),r("li",[r("code",[t._v("/scheduler")]),t._v(": will expose all current scheduled flows on this scheduler with next date")])]),t._v(" "),r("h2",{attrs:{id:"others-micronaut-default-endpoint"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#others-micronaut-default-endpoint"}},[t._v("#")]),t._v(" Others micronaut default endpoint")]),t._v(" "),r("p",[t._v("Since Kestra is based on "),r("a",{attrs:{href:"https://micronaut.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("Micronaut"),r("OutboundLink")],1),t._v(", the "),r("a",{attrs:{href:"https://docs.micronaut.io/latest/guide/index.html#providedEndpoints",target:"_blank",rel:"noopener noreferrer"}},[t._v("default micronaut endpoint"),r("OutboundLink")],1),r("br"),t._v("\nis enabled by default on port 8081 :")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("/info")]),t._v(" "),r("a",{attrs:{href:"https://docs.micronaut.io/snapshot/guide/index.html#infoEndpoint",target:"_blank",rel:"noopener noreferrer"}},[t._v("Info Endpoint"),r("OutboundLink")],1),t._v(" with git status informations.")]),t._v(" "),r("li",[r("code",[t._v("/health")]),t._v(" "),r("a",{attrs:{href:"https://docs.micronaut.io/snapshot/guide/index.html#healthEndpoint",target:"_blank",rel:"noopener noreferrer"}},[t._v("Health Endpoint"),r("OutboundLink")],1),t._v(" usable for add an external heathcheck on application.")]),t._v(" "),r("li",[r("code",[t._v("/loggers")]),t._v(" "),r("a",{attrs:{href:"https://docs.micronaut.io/snapshot/guide/index.html#loggersEndpoint",target:"_blank",rel:"noopener noreferrer"}},[t._v("Loggers Endpoint"),r("OutboundLink")],1),t._v(" allowing changing logger level during runtime.")]),t._v(" "),r("li",[r("code",[t._v("/metrics")]),t._v(" "),r("a",{attrs:{href:"https://docs.micronaut.io/snapshot/guide/index.html#metricsEndpoint",target:"_blank",rel:"noopener noreferrer"}},[t._v("Metrics Endpoint"),r("OutboundLink")],1),t._v(" metrics in json format.")]),t._v(" "),r("li",[r("code",[t._v("/env")]),t._v(" "),r("a",{attrs:{href:"https://docs.micronaut.io/snapshot/guide/index.html#environmentEndpoint",target:"_blank",rel:"noopener noreferrer"}},[t._v("Env Endpoint"),r("OutboundLink")],1),t._v(" to debug configuration files.")])]),t._v(" "),r("p",[t._v("You can disabled some endpoint following micronaut configuration above.")])])}),[],!1,null,null,null);e.default=n.exports}}]);