(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{784:function(t,e,s){"use strict";s.r(e);var a=s(19),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"flow"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flow"}},[t._v("#")]),t._v(" Flow")]),t._v(" "),s("blockquote",[s("p",[t._v("The Flow is the base of your workload, it defines all the tasks you want to perform and the order in which they will be run.")])]),t._v(" "),s("h2",{attrs:{id:"flow-sample"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flow-sample"}},[t._v("#")]),t._v(" Flow sample")]),t._v(" "),s("p",[t._v("The flow model is a yaml document describing how Kestra will schedule and compute your workload.")]),t._v(" "),s("p",[t._v("Here is a full sample flow demonstrating the flow definition."),s("br"),t._v("\nThe following code is a sample existing task in Kestra used for testing purposes.")]),t._v(" "),s("h2",{attrs:{id:"flow-properties"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flow-properties"}},[t._v("#")]),t._v(" Flow Properties")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" samples\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" io.kestra.tests\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("revision")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Some flow **documentation** in *Markdown*"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" prd\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("country")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FR\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("inputs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" my"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("value\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" STRING\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("required")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("defaults")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default value"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" This is a not required my"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("value\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("variables")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("first")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("second")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{{vars.first}} > 2"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("third")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{{vars.second}} > 3"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tasks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" date\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" io.kestra.core.tasks.debugs.Return\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Some tasks **documentation** in *Markdown*"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("disabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"A log line content with a contextual date variable {{taskrun.startDate}}"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("errors")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" failed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("echo\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" io.kestra.core.tasks.debugs.Echo\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" I'm failing "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("task.id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("listeners")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"some listener **documentation** in *Markdown*"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("conditions")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" io.kestra.core.models.conditions.types.ExecutionStatusCondition\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("in")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" SUCCESS\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tasks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" execution"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("failed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("listener\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" io.kestra.core.tasks.scripts.Bash\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("commands")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(' echo "I\'m a listeners"\n\n'),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("triggers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" monthly\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" io.kestra.core.models.triggers.types.Schedule\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"some trigger **documentation** in *Markdown*"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cron")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0 0 1 * *\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("backfill")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("2020-01-01T00:00:00+02:00")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("taskDefaults")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" io.kestra.core.tasks.debugs.Echo\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("level")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ERROR\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("disabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n")])])]),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-bordered table-hover table-striped"},[s("thead",[s("tr",[s("th",[t._v("Field")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("id")])]),t._v(" "),s("td",[t._v("Flow identifier, must be unique across namespaces.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("namespace")])]),t._v(" "),s("td",[t._v("Each task lives in one arbitrary namespace, this is useful for task organization. A Namespace is required.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("revision")])]),t._v(" "),s("td",[t._v("A Flow version, handled internally by kestra, and is incremented for each modification save, not a required field since it is autogenerated.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("description")])]),t._v(" "),s("td",[t._v("Description for documentation, more details "),s("RouterLink",{attrs:{to:"/docs/developer-guide/documentation/"}},[t._v("here")])],1)]),t._v(" "),s("tr",[s("td",[s("code",[t._v("labels")])]),t._v(" "),s("td",[t._v("List of labels (key & value as string) for this flow.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("inputs")])]),t._v(" "),s("td",[t._v("List of inputs for the current flow, more details "),s("RouterLink",{attrs:{to:"/docs/developer-guide/inputs/"}},[t._v("here")])],1)]),t._v(" "),s("tr",[s("td",[s("code",[t._v("inputs.[].name")])]),t._v(" "),s("td",[t._v("The name for this input, allowing it to be used as variables(vars) on the current flow")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("inputs.[].type")])]),t._v(" "),s("td",[t._v("The type for this input, for example (STRING, FILE, etc...)")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("inputs.[].required")])]),t._v(" "),s("td",[t._v("Determines if the input is required (and prevents the flow from executing without this input)")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("inputs.[].defaults")])]),t._v(" "),s("td",[t._v("The default value of the input if no value is provided")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("inputs.[].description")])]),t._v(" "),s("td",[t._v("Description for documentation, more details "),s("RouterLink",{attrs:{to:"/docs/developer-guide/documentation/"}},[t._v("here")])],1)]),t._v(" "),s("tr",[s("td",[s("code",[t._v("variables")])]),t._v(" "),s("td",[t._v("A list of variables (such as key, value, etc) for the current flow that can be reached with "),s("code",{pre:!0},[t._v("{{ vars.name }}")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("tasks")])]),t._v(" "),s("td",[t._v("A list of related tasks for the current flow, all tasks will be run sequentially.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("tasks.[].id")])]),t._v(" "),s("td",[t._v("The "),s("strong",[t._v("unique")]),t._v(" task id for the current flow.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("tasks.[].type")])]),t._v(" "),s("td",[t._v("The task type is a full java class name.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("tasks.[].description")])]),t._v(" "),s("td",[t._v("Description for documentation, more details "),s("RouterLink",{attrs:{to:"/docs/developer-guide/documentation/"}},[t._v("here")])],1)]),t._v(" "),s("tr",[s("td",[s("code",[t._v("tasks.[].disabled")])]),t._v(" "),s("td",[t._v("This task is disabled, and will be kept on the flow source, but never executed.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("tasks.[].timeout")])]),t._v(" "),s("td",[t._v("This is the max duration of the current task, in a Duration format like "),s("code",[t._v("PT15M")]),t._v(".")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("tasks.[].xxx")])]),t._v(" "),s("td",[t._v("Each task type comes with a specific field that is documented on the "),s("RouterLink",{attrs:{to:"/plugins/"}},[t._v("plugins page")])],1)]),t._v(" "),s("tr",[s("td",[s("code",[t._v("errors")])]),t._v(" "),s("td",[t._v("A list of error tasks for the current flow, all listed tasks will be run sequentially only if there is an error on the current execution.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("errors.[].xxx")])]),t._v(" "),s("td",[t._v("The same property as "),s("code",[t._v("tasks")]),t._v(", error can be any normal tasks, more details "),s("RouterLink",{attrs:{to:"/docs/developer-guide/errors-handling/"}},[t._v("here")])],1)]),t._v(" "),s("tr",[s("td",[s("code",[t._v("listeners")])]),t._v(" "),s("td",[t._v("List of listeners for the current flow, more details "),s("RouterLink",{attrs:{to:"/docs/developer-guide/listeners/"}},[t._v("here")])],1)]),t._v(" "),s("tr",[s("td",[s("code",[t._v("listeners.[].description")])]),t._v(" "),s("td",[t._v("Description for documentation, more details "),s("RouterLink",{attrs:{to:"/docs/developer-guide/documentation/"}},[t._v("here")])],1)]),t._v(" "),s("tr",[s("td",[s("code",[t._v("listeners.[].condition")])]),t._v(" "),s("td",[t._v("The condition that will be validated in order to launch or skip this listener")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("listeners.[].tasks.[].xxx")])]),t._v(" "),s("td",[t._v("The same property as "),s("code",[t._v("tasks")]),t._v(", the task to run for this listener")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("triggers")])]),t._v(" "),s("td",[t._v("Triggers are external events (such as date and/or time, for example) to launch this job, more details "),s("RouterLink",{attrs:{to:"/docs/developer-guide/triggers/"}},[t._v("here")])],1)]),t._v(" "),s("tr",[s("td",[s("code",[t._v("triggers.[].id")])]),t._v(" "),s("td",[t._v("A "),s("strong",[t._v("unique")]),t._v(" trigger id which can't be updated.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("triggers.[].type")])]),t._v(" "),s("td",[t._v("The trigger type is a full java class name.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("triggers.[].description")])]),t._v(" "),s("td",[t._v("Description for documentation, more details "),s("RouterLink",{attrs:{to:"/docs/developer-guide/documentation/"}},[t._v("here")])],1)]),t._v(" "),s("tr",[s("td",[s("code",[t._v("triggers.[].disabled")])]),t._v(" "),s("td",[t._v("Disabled the triggers")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("triggers.[].xxx")])]),t._v(" "),s("td",[t._v("Like tasks, each trigger has its own properties")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("taskDefaults")])]),t._v(" "),s("td",[t._v("Default value for current tasks, in order to avoid repeat the same properties on each tasks")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("taskDefaults.[].type")])]),t._v(" "),s("td",[t._v("The task type is a full java class name.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("taskDefaults.[].forced")])]),t._v(" "),s("td",[t._v("If the default value is set to Forced, the taskDefault will always overwrite the user properties for the task (default "),s("code",[t._v("false")]),t._v(").")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("taskDefaults.[].values.xxx")])]),t._v(" "),s("td",[t._v("The properties (just like Tasks) that you want to be set as default.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("disabled")])]),t._v(" "),s("td",[t._v("The flow can be disabled to prevent any executions.")])])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);