(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{652:function(e,t,a){"use strict";a.r(t);var s=a(19),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"deployment-on-kubernetes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deployment-on-kubernetes"}},[e._v("#")]),e._v(" Deployment on Kubernetes")]),e._v(" "),a("p",[e._v("The recommended deployment environment for "),a("strong",[e._v("production")]),e._v(" workload is "),a("a",{attrs:{href:"http://kubernetes.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Kubernetes"),a("OutboundLink")],1),e._v("."),a("br"),e._v("\nWe provide a "),a("a",{attrs:{href:"https://helm.sh/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Helm Charts"),a("OutboundLink")],1),e._v(" in order to deploy your cluster.")]),e._v(" "),a("ul",[a("li",[e._v("The chart repository is available "),a("a",{attrs:{href:"https://helm.kestra.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("li",[e._v("The source code of the charts is "),a("a",{attrs:{href:"https://github.com/kestra-io/helm-charts",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1),e._v(".")])]),e._v(" "),a("h2",{attrs:{id:"quick-start"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#quick-start"}},[e._v("#")]),e._v(" Quick Start")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("helm repo "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),e._v(" kestra https://helm.kestra.io/\nhelm "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" kestra --set kafka.enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("true --set elasticsearch.enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("true --set minio.enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("true kestra/kestra\n")])])]),a("h2",{attrs:{id:"details"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#details"}},[e._v("#")]),e._v(" Details")]),e._v(" "),a("p",[e._v("You can change the default behaviour and configuring your cluster changing the "),a("a",{attrs:{href:"https://github.com/kestra-io/helm-charts/blob/master/charts/kestra/values.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("defaults values"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("By default, charts will only deploy kestra service with only 1 replica for each "),a("a",{attrs:{href:"../../../architecture"}},[e._v("servers")]),e._v(".")]),e._v(" "),a("p",[e._v("You can also deploy the standalone server (not for production), that will host all kestra servers in only one pod, using this values:")]),e._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("kestra")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("deployments")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("webserver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("false")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("executor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("false")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("indexer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("false")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("scheduler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("false")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("worker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("false")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("standalone")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("true")]),e._v("\n")])])]),a("p",[e._v("The charts could also deploy all needed services:")]),e._v(" "),a("ul",[a("li",[e._v("Zookeeper using "),a("code",[e._v("kafka.enabled: true")])]),e._v(" "),a("li",[e._v("Kafka cluster using "),a("code",[e._v("kafka.enabled: true")])]),e._v(" "),a("li",[e._v("Elasticsearch cluster using "),a("code",[e._v("elasticsearch.enabled: true")])]),e._v(" "),a("li",[e._v("Minio standalone using "),a("code",[e._v("minio.enabled: true")])])]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("All service (kafka, elasticsearch, zookeeper, minio) are deployed using unsecured configurations (no authentification, no tls, ...). When installing for a production environnement, you "),a("strong",[e._v("need")]),e._v(" to secure all these services and adapt all service configuration to be production ready.")])]),e._v(" "),a("p",[e._v("Most important values to adapt are "),a("a",{attrs:{href:"../../configuration"}},[e._v("configuration files")]),e._v(", with these values:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("configuration")]),e._v(": in order to set the whole configuration files from kestra")]),e._v(" "),a("li",[a("code",[e._v("secrets")]),e._v(": that will be merged with "),a("code",[e._v("configuration")]),e._v(" but kept as secret on your k8s cluster.")])])])}),[],!1,null,null,null);t.default=r.exports}}]);