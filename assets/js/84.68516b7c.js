(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{774:function(e,t,s){"use strict";s.r(t);var a=s(19),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"schedule"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#schedule"}},[e._v("#")]),e._v(" Schedule")]),e._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"io.kestra.core.models.triggers.types.Schedule"')]),e._v("\n")])])]),s("blockquote",[s("p",[e._v("Kestra is able to trigger flows based on a Schedule (aka the time). If you need to wait for another system to be ready and cannot use any event mechanism, you can schedule 1 or more time for the current flow.")])]),e._v(" "),s("h2",{attrs:{id:"example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[e._v("#")]),e._v(" Example")]),e._v(" "),s("blockquote",[s("p",[e._v("A schedule with a backfill.")])]),e._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("triggers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" schedule\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" io.kestra.core.models.triggers.types.Schedule\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("cron")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"*/15 * * * *"')]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("backfill")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token datetime number"}},[e._v("2020-06-25T14:00:00Z")]),e._v("\n")])])]),s("blockquote",[s("p",[e._v("A schedule that runs only the first monday of every month at 11 AM.")])]),e._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("triggers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" schedule\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" io.kestra.core.models.triggers.types.Schedule\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("cron")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"0 11 * * 1"')]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("scheduleConditions")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" monday\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" io.kestra.core.models.conditions.types.DayInMonthCondition\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"{{ trigger.date }}"')]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("dayOfWeek")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"MONDAY"')]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("dayInMonth")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"FIRST"')]),e._v("\n")])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),s("p",[e._v("Schedules "),s("strong",[e._v("cannot overlap")]),e._v(". This means that we "),s("strong",[e._v("cannot have any concurrent schedules")]),e._v(". If the previous schedule is not ended when the next one must start, the scheduler will wait until the end of the previous. The same applies during backfills.")])]),e._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),s("p",[e._v("Most of the time, schedule execution will depend on the "),s("code",[e._v("trigger.date")]),e._v(" (looking at files for today, sql query with where schedule date). This works well, but it prevents you to execute your flow manually (since these variables are only available during schedule).")]),e._v(" "),s("p",[e._v("You can use this expression in order to make your "),s("strong",[e._v("manual execution work")]),e._v(": "),s("code",{pre:!0},[e._v('{{ schedule.date ?? execution.startDate | date("yyyy-MM-dd") }}')]),e._v(". It will use the current date instead of the scheduled one on manual execution, and your flow will not fail.")])]),e._v(" "),s("h2",{attrs:{id:"backfill"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#backfill"}},[e._v("#")]),e._v(" Backfill")]),e._v(" "),s("p",[e._v("Kestra will optionally handle a backfill. The concept of a backfill is the replay of a missed schedule because we create the flow later.")]),e._v(" "),s("p",[e._v("Backfills will perform all the schedules between the defined date & the current date and will start after the normal schedule.")]),e._v(" "),s("h2",{attrs:{id:"variables"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#variables"}},[e._v("#")]),e._v(" Variables")]),e._v(" "),s("p",[e._v("When the flow is scheduled, some context variables are injected to allow some customization of the flow (such as filename, where in sql query).")]),e._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-bordered table-hover table-striped"},[s("thead",[s("tr",[s("th",[e._v("Parameter")]),e._v(" "),s("th",[e._v("Description")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[s("code",{pre:!0},[e._v("{{ trigger.date }}")])]),e._v(" "),s("td",[e._v("the date of current schedule")])]),e._v(" "),s("tr",[s("td",[s("code",{pre:!0},[e._v("{{ trigger.next }}")])]),e._v(" "),s("td",[e._v("the date of next schedule")])]),e._v(" "),s("tr",[s("td",[s("code",{pre:!0},[e._v("{{ trigger.previous }}")])]),e._v(" "),s("td",[e._v("the date of previous schedule")])])])])]),s("h2",{attrs:{id:"schedule-conditions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#schedule-conditions"}},[e._v("#")]),e._v(" Schedule Conditions")]),e._v(" "),s("p",[e._v("When the "),s("code",[e._v("cron")]),e._v(" is not sufficient to determine the date you want to schedule your flow, you can use "),s("code",[e._v("scheduleConditions")]),e._v(" in order to add some extra conditions, (for example, only the first day of the month, only the weekend, ...)."),s("br"),e._v("\nYou "),s("strong",[e._v("must")]),e._v(" use the "),s("code",{pre:!0},[e._v("{{ trigger.date }}")]),e._v(" expression  on properties "),s("code",[e._v("date")]),e._v(" the current schedule."),s("br"),e._v("\nThis condition will be evaluated and "),s("code",{pre:!0},[e._v("{{ trigger.previous }}")]),e._v(" and "),s("code",{pre:!0},[e._v("{{ trigger.next }}")]),e._v(" will reflect the date "),s("strong",[e._v("with")]),e._v(" the conditions applied.")]),e._v(" "),s("p",[e._v("The list of core conditions that can be used are:")]),e._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/plugins/core/conditions/io.kestra.core.models.conditions.types.DateTimeBetweenCondition.html"}},[e._v("DateTimeBetweenCondition")])],1),e._v(" "),s("li",[s("RouterLink",{attrs:{to:"/plugins/core/conditions/io.kestra.core.models.conditions.types.DayWeekCondition.html"}},[e._v("DayWeekCondition")])],1),e._v(" "),s("li",[s("RouterLink",{attrs:{to:"/plugins/core/conditions/io.kestra.core.models.conditions.types.DayWeekInMonthCondition.html"}},[e._v("DayWeekInMonthCondition")])],1),e._v(" "),s("li",[s("RouterLink",{attrs:{to:"/plugins/core/conditions/io.kestra.core.models.conditions.types.NotCondition.html"}},[e._v("NotCondition")])],1),e._v(" "),s("li",[s("RouterLink",{attrs:{to:"/plugins/core/conditions/io.kestra.core.models.conditions.types.OrCondition.html"}},[e._v("OrCondition")])],1),e._v(" "),s("li",[s("RouterLink",{attrs:{to:"/plugins/core/conditions/io.kestra.core.models.conditions.types.WeekendCondition.html"}},[e._v("WeekendCondition")])],1),e._v(" "),s("li",[s("RouterLink",{attrs:{to:"/plugins/core/conditions/io.kestra.core.models.conditions.types.DayInMonthCondition.html"}},[e._v("DayInMonthCondition")])],1)]),e._v(" "),s("h2",{attrs:{id:"properties"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#properties"}},[e._v("#")]),e._v(" Properties")]),e._v(" "),s("h3",{attrs:{id:"id"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#id"}},[e._v("#")]),e._v(" "),s("code",[e._v("id")])]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("Type:")]),e._v(" "),s("Badge",{attrs:{vertical:"middle",text:"String"}})],1),e._v(" "),s("li",[s("strong",[e._v("Required:")]),e._v(" ✔")])]),e._v(" "),s("blockquote",[s("p",[e._v("Unique for a flow. The scheduler will keep the last execution date for this schedule. This allows you to change the cron expression without restarting all the past executions (if backfill exists)")])]),e._v(" "),s("h3",{attrs:{id:"cron"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cron"}},[e._v("#")]),e._v(" "),s("code",[e._v("cron")])]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("Type:")]),e._v(" "),s("mark",[e._v("string")])]),e._v(" "),s("li",[s("strong",[e._v("Dynamic:")]),e._v(" ❓")]),e._v(" "),s("li",[s("strong",[e._v("Required:")]),e._v(" ❌")])]),e._v(" "),s("blockquote",[s("p",[e._v("the cron expression you need to"),s("br"),e._v("\na standard "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Cron",target:"_blank",rel:"noopener noreferrer"}},[e._v("unix cron expression"),s("OutboundLink")],1),e._v(" without seconds.")])]),e._v(" "),s("h3",{attrs:{id:"backfill-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#backfill-2"}},[e._v("#")]),e._v(" "),s("code",[e._v("backfill")])]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("Type:")]),e._v(" "),s("mark",[s("a",{attrs:{href:"#schedulebackfill"}},[e._v("ScheduleBackfill")])])]),e._v(" "),s("li",[s("strong",[e._v("Dynamic:")]),e._v(" ❓")]),e._v(" "),s("li",[s("strong",[e._v("Required:")]),e._v(" ❌")])]),e._v(" "),s("blockquote",[s("p",[e._v("Backfill options in order to fill missing previous past dates"),s("br"),e._v("\nKestra will optionally handle a backfill. The concept of a backfill is to replay the missing schedule because we create the flow later.")])]),e._v(" "),s("p",[e._v("Backfill will do all schedules between the defined date & the current date and will start after the normal schedule.")]),e._v(" "),s("h3",{attrs:{id:"scheduleconditions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scheduleconditions"}},[e._v("#")]),e._v(" "),s("code",[e._v("scheduleConditions")])]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("Type:")]),e._v(" "),s("mark",[e._v("array")])]),e._v(" "),s("li",[s("strong",[e._v("SubType:")]),e._v(" "),s("mark",[e._v("ScheduleCondition")])]),e._v(" "),s("li",[s("strong",[e._v("Dynamic:")]),e._v(" ❓")]),e._v(" "),s("li",[s("strong",[e._v("Required:")]),e._v(" ❌")])]),e._v(" "),s("blockquote",[s("p",[e._v("List of schedule Conditions in order to limit schedule date.")])]),e._v(" "),s("h3",{attrs:{id:"inputs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#inputs"}},[e._v("#")]),e._v(" "),s("code",[e._v("inputs")])]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("Type:")]),e._v(" "),s("mark",[e._v("object")])]),e._v(" "),s("li",[s("strong",[e._v("Dynamic:")]),e._v(" ✔️")]),e._v(" "),s("li",[s("strong",[e._v("Required:")]),e._v(" ❌")])]),e._v(" "),s("blockquote",[s("p",[e._v("The input to pass to the triggered flow")])]),e._v(" "),s("h3",{attrs:{id:"latemaximumdelay"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#latemaximumdelay"}},[e._v("#")]),e._v(" "),s("code",[e._v("lateMaximumDelay")])]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("Type:")]),e._v(" "),s("mark",[e._v("Duration")])]),e._v(" "),s("li",[s("strong",[e._v("Dynamic:")]),e._v(" ❌")]),e._v(" "),s("li",[s("strong",[e._v("Required:")]),e._v(" ❌")])]),e._v(" "),s("blockquote",[s("p",[e._v("The maximum late delay accepted")])]),e._v(" "),s("p",[e._v("If the schedule didn't start after this delay, the execution will be skip.")]),e._v(" "),s("h2",{attrs:{id:"outputs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#outputs"}},[e._v("#")]),e._v(" Outputs")]),e._v(" "),s("h3",{attrs:{id:"date"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#date"}},[e._v("#")]),e._v(" "),s("code",[e._v("date")])]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("Type:")]),e._v(" "),s("mark",[e._v("string")])])]),e._v(" "),s("blockquote",[s("p",[e._v("The date of the current schedule")])]),e._v(" "),s("h3",{attrs:{id:"next"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#next"}},[e._v("#")]),e._v(" "),s("code",[e._v("next")])]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("Type:")]),e._v(" "),s("mark",[e._v("string")])])]),e._v(" "),s("blockquote",[s("p",[e._v("The date of the next schedule")])]),e._v(" "),s("h3",{attrs:{id:"previous"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#previous"}},[e._v("#")]),e._v(" "),s("code",[e._v("previous")])]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("Type:")]),e._v(" "),s("mark",[e._v("string")])])]),e._v(" "),s("blockquote",[s("p",[e._v("The date of the previous schedule")])]),e._v(" "),s("h2",{attrs:{id:"definitions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#definitions"}},[e._v("#")]),e._v(" Definitions")]),e._v(" "),s("h3",{attrs:{id:"schedulebackfill"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#schedulebackfill"}},[e._v("#")]),e._v(" "),s("code",[e._v("ScheduleBackfill")])]),e._v(" "),s("h4",{attrs:{id:"start"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#start"}},[e._v("#")]),e._v(" "),s("code",[e._v("start")])]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("Type:")]),e._v(" "),s("mark",[e._v("string")])])]),e._v(" "),s("blockquote",[s("p",[e._v("The first start date")])])])}),[],!1,null,null,null);t.default=r.exports}}]);