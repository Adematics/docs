(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{798:function(t,s,a){"use strict";a.r(s);var e=a(19),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"terraform"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#terraform"}},[t._v("#")]),t._v(" Terraform")]),t._v(" "),a("h2",{attrs:{id:"kestra-provider"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kestra-provider"}},[t._v("#")]),t._v(" Kestra Provider")]),t._v(" "),a("p",[t._v("You can use the "),a("a",{attrs:{href:"https://registry.terraform.io/providers/kestra-io/kestra/latest",target:"_blank",rel:"noopener noreferrer"}},[t._v("Official Kestra Provider"),a("OutboundLink")],1),t._v(" to manage every available resource in Kestra.")]),t._v(" "),a("h2",{attrs:{id:"examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[t._v("#")]),t._v(" Examples")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("Flows should always be deployed before Templates, to avoid flows running before their templates are created.")])]),t._v(" "),a("p",[t._v("First, you need to create a "),a("code",[t._v("provider.tf")]),t._v(" or "),a("code",[t._v("main.tf")]),t._v(" file with the following content to configure the provider:")]),t._v(" "),a("h4",{attrs:{id:"provider-tf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#provider-tf"}},[t._v("#")]),t._v(" "),a("strong",[a("code",[t._v("provider.tf")])])]),t._v(" "),a("div",{staticClass:"language-hcl extra-class"},[a("pre",{pre:!0,attrs:{class:"language-hcl"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("provider"),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v(' "kestra" ')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mandatory, the URL for kestra")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("url")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:8080"')]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# optional basic auth username")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("username")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"john"')]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# optional basic auth password")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("password")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-password"')]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# optional jwt token")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("jwt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6Iktlc3RyYS5pbyIsImlhdCI6MTUxNjIzOTAyMn0.hm2VKztDJP7CUsI69Th6Y5NLEQrXx7OErLXay55GD5U"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Then, you define the source and the version of the provider:")]),t._v(" "),a("h4",{attrs:{id:"version-tf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#version-tf"}},[t._v("#")]),t._v(" "),a("strong",[a("code",[t._v("version.tf")])])]),t._v(" "),a("div",{staticClass:"language-hcl extra-class"},[a("pre",{pre:!0,attrs:{class:"language-hcl"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v("kestra")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("source")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kestra-io/kestra"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("version")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"~> 0.1.9"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Finally, you can create your resources:")]),t._v(" "),a("h4",{attrs:{id:"flows-tf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flows-tf"}},[t._v("#")]),t._v(" "),a("strong",[a("code",[t._v("flows.tf")])])]),t._v(" "),a("div",{staticClass:"language-hcl extra-class"},[a("pre",{pre:!0,attrs:{class:"language-hcl"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("resource "),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v('"kestra_flow"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"flow-example"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("namespace")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"io.kestra"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("flow_id")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-flow"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("content")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" file("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kestra/flows/my-flow.yml"')]),t._v(")\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"templates-tf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#templates-tf"}},[t._v("#")]),t._v(" "),a("strong",[a("code",[t._v("templates.tf")])])]),t._v(" "),a("div",{staticClass:"language-hcl extra-class"},[a("pre",{pre:!0,attrs:{class:"language-hcl"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("resource "),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v('"kestra_template"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"template-example"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("namespace")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"io.kestra"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("template_id")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-template"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("content")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" file("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"kestra/templates/my-template.yml"')]),t._v(")\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("depends_on")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("kestra_flow.flow-example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Here we ensure that the flow is deployed before the template")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("More details can be found "),a("a",{attrs:{href:"https://registry.terraform.io/providers/kestra-io/kestra/latest/docs",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),a("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);s.default=r.exports}}]);