(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{764:function(e,t,a){"use strict";a.r(t);var s=a(19),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"deployment-with-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deployment-with-docker"}},[e._v("#")]),e._v(" Deployment with Docker")]),e._v(" "),a("p",[e._v("The quickest way to install Kestra is to use "),a("em",[e._v("Docker Compose")]),e._v(". This will start a "),a("strong",[e._v("non-production")]),e._v(" Kestra with all the dependencies.")]),e._v(" "),a("h2",{attrs:{id:"before-you-begin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#before-you-begin"}},[e._v("#")]),e._v(" Before you begin")]),e._v(" "),a("p",[e._v("Make sure you have already installed :")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://docs.docker.com/engine/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://docs.docker.com/compose/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Compose"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"launch-kestra"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#launch-kestra"}},[e._v("#")]),e._v(" Launch Kestra")]),e._v(" "),a("ul",[a("li",[e._v("Download the compose file "),a("a",{attrs:{href:"https://github.com/kestra-io/kestra/blob/develop/docker-compose.yml",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("Run "),a("code",[e._v("docker-compose up")])]),e._v(" "),a("li",[e._v("Open "),a("a",{attrs:{href:"http://localhost:8080",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://localhost:8080"),a("OutboundLink")],1),e._v(" in your browser")])]),e._v(" "),a("p",[e._v("This will start all the dependencies with a pre-configured Kestra that is connected to everything!")]),e._v(" "),a("p",[e._v("Kestra will start a "),a("em",[e._v("Standalone")]),e._v(" server (all the different "),a("a",{attrs:{href:"../../architecture"}},[e._v("servers")]),e._v(" in one JVM)."),a("br"),e._v("\nThis is clearly not meant for "),a("strong",[e._v("production")]),e._v(" workloads, but is certainly sufficient to test on a local computer.")]),e._v(" "),a("p",[e._v("The "),a("RouterLink",{attrs:{to:"/docs/administrator-guide/configuration/"}},[e._v("configuration")]),e._v(" will be done inside the "),a("code",[e._v("KESTRA_CONFIGURATION")]),e._v(" environment variable of the Kestra container. You can update the environment variable inside the Docker compose file, or pass it via the docker command line argument."),a("br"),e._v("\nIf you pass it via the docker command line argument, don't forget to add existing configuration or nothing will work anymore.")],1),e._v(" "),a("h2",{attrs:{id:"docker-image"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image"}},[e._v("#")]),e._v(" Docker Image")]),e._v(" "),a("h3",{attrs:{id:"use-official-images"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-official-images"}},[e._v("#")]),e._v(" Use official images")]),e._v(" "),a("p",[e._v("The official Kestra docker images are available in "),a("a",{attrs:{href:"https://hub.docker.com/r/kestra/kestra",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker hub"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("We provide 2 images :")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("kestra/kestra:latest")])]),e._v(" "),a("li",[a("code",[e._v("kestra/kestra:latest-full")])])]),e._v(" "),a("p",[e._v("These docker images are based on the "),a("code",[e._v("eclipse-temurin:11-jre")]),e._v(" docker image.")]),e._v(" "),a("h4",{attrs:{id:"kestra-kestra-latest"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kestra-kestra-latest"}},[e._v("#")]),e._v(" "),a("code",[e._v("kestra/kestra:latest")])]),e._v(" "),a("p",[e._v("This image :")]),e._v(" "),a("ul",[a("li",[e._v("doesn't contains any kestra plugins.")]),e._v(" "),a("li",[e._v("doesn't contains a lot of binaries to work with your "),a("RouterLink",{attrs:{to:"/plugins/core/tasks/scripts/io.kestra.core.tasks.scripts.Bash.html"}},[e._v("Bash tasks")]),e._v(".")],1),e._v(" "),a("li",[e._v("doesn't contains some binaries for "),a("a",{attrs:{href:"https://kestra.io/plugins/core/tasks/scripts/io.kestra.core.tasks.scripts.Python.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Python tasks"),a("OutboundLink")],1),e._v(" or "),a("a",{attrs:{href:"https://kestra.io/plugins/core/tasks/scripts/io.kestra.core.tasks.scripts.Node.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node tasks"),a("OutboundLink")],1),e._v(".")])]),e._v(" "),a("h4",{attrs:{id:"kestra-kestra-latest-full"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kestra-kestra-latest-full"}},[e._v("#")]),e._v(" "),a("code",[e._v("kestra/kestra:latest-full")])]),e._v(" "),a("p",[e._v("This image contains all the kestra plugins and all the binaries for "),a("a",{attrs:{href:"https://kestra.io/plugins/core/tasks/scripts/io.kestra.core.tasks.scripts.Python.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Python tasks"),a("OutboundLink")],1),e._v(" or "),a("a",{attrs:{href:"https://kestra.io/plugins/core/tasks/scripts/io.kestra.core.tasks.scripts.Node.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node tasks"),a("OutboundLink")],1),e._v("."),a("br"),e._v("\nTake care that this image will always contains the latest version of all plugins that can have some breaking changes.")]),e._v(" "),a("h3",{attrs:{id:"create-a-new-image-with-more-binaries"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-new-image-with-more-binaries"}},[e._v("#")]),e._v(" Create a new image with more binaries")]),e._v(" "),a("p",[e._v("If the base or full image does not contains binaries you need, you can create a new image from the Kestra base image and add needed binaries.")]),e._v(" "),a("p",[e._v("The following "),a("code",[e._v("DockerFile")]),e._v(" creates an image from the Kestra base image and adds the "),a("code",[e._v("golang")]),e._v(" binary:")]),e._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ARG")]),e._v(" IMAGE_TAG=latest")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" kestra/kestra:"),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$IMAGE_TAG")])]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("RUN")]),e._v(" mkdir -p /app/plugins && "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("\\")]),e._v("\n  apt-get update -y && "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("\\")]),e._v("\n  apt-get install -y --no-install-recommends golang && "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("\\")]),e._v("\n  apt-get clean && rm -rf /var/lib/apt/lists/* /var/tmp/*")]),e._v("\n")])])]),a("h3",{attrs:{id:"create-a-new-image-with-more-plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-new-image-with-more-plugins"}},[e._v("#")]),e._v(" Create a new image with more plugins")]),e._v(" "),a("p",[e._v("By default, the Kestra base docker image does not contains any plugins, you can create a new image from the Kestra base image and add the needed plugins.")]),e._v(" "),a("p",[e._v("The following "),a("code",[e._v("DockerFile")]),e._v(" creates an image from the Kestra base image and adds the "),a("code",[e._v("plugin-notifications")]),e._v(", "),a("code",[e._v("storage-gcs")]),e._v(" and "),a("code",[e._v("plugin-gcp")]),e._v(" plugins using the command "),a("code",[e._v("kestra plugins install")]),e._v(":")]),e._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ARG")]),e._v(" IMAGE_TAG=latest")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" kestra/kestra:"),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$IMAGE_TAG")])]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("RUN")]),e._v(" /app/kestra plugins install "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("\\")]),e._v("\n  io.kestra.plugin:plugin-notifications:LATEST "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("\\")]),e._v("\n  io.kestra.storage:storage-gcs:LATEST "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("\\")]),e._v("\n  io.kestra.plugin:plugin-gcp:LATEST")]),e._v("\n")])])]),a("h3",{attrs:{id:"docker-image-tags"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-tags"}},[e._v("#")]),e._v(" Docker image tags")]),e._v(" "),a("p",[e._v("We provide 3 tags for each docker images:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("latest")]),e._v(": the latest default image along with its full variant "),a("code",[e._v("latest-full")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("release")]),e._v(": the preview of the next release along with its full variant "),a("code",[e._v("release-full")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("develop")]),e._v(": an experimental image based on the "),a("code",[e._v("develop")]),e._v(" branch that will change every day and contains all "),a("strong",[e._v("unstable")]),e._v(" features we are working on, along with its full variant "),a("code",[e._v("develop-full")]),e._v(".")])])])}),[],!1,null,null,null);t.default=r.exports}}]);